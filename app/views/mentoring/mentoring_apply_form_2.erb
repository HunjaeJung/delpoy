<!-- 멘토링 신청 양식입니다  페이지 2 ,   -->
<!-- logo 만 남기고 시프다 -->

<header>
	<div class="img_header5">
		<div class="wrapper_header">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="basic_header">
				<div class="logo">
					<a href="/"> <%= image_tag("logo.png" , id:'logo')  %> </a>
				</div>
				<div class="menu">
					<nav>
						<div class="nav">
							<div class="li menu_service">
								<a href="/service" class="li_a">서비스</a>
							</div>
							<div class="li menu_help">
								<a href="/help" class="li_a">도움말</a>
							</div>
							<div class="li menu_user">
								<a href="/mypage" class="li_a ">안녕하세요! <%= @user.username %>님</a>
								<div class="user_scroll">
									<ul>
										<li class="my_page">
											<a href="/mypage">마이페이지</a>
										</li>
										<li class="log_out">
											<a href="/users/sign_out">로그아웃</a>
										</li>
									</ul>
								</div>
							</div>
							<% if @user.grade == 1 %>
							<div class="li menu_admin">
								<a href="/admin" class="li_a ">관리자 페이지</a>
							</div>
							<% end %>
							<div class="li menu_enroll">
								<a href="enroll_mentor" class="li_a nav_enroll_mentor">멘토 등록하기</a>
							</div>
						</div>
					</nav>
				</div>
			</div>
    </div>
  </div>
</header>

<section>
	<div class="wrapper_section2 margin_plus2">
		<h2 class="text_center"> 1-1. 여행 기본 정보 작성하기 </h2>
		<div class="panel panel-default">
			<div class="panel-body">
				<form action="/mentoring_process2" method="post">
					<input type="hidden" value ="<%= @user.id %>" name="id_of_user">
					<!--지역-->
					<div class="form-group">
						<label for="mentor_area"> 가고 싶은 지역</label>
            <input id="pac-input" class="controls" type="text" placeholder="Search Box">
            <div id="map"></div>
            <div id="mentoring_area_block"></div>
						<input type="text" class="form-control enroll_input mentoring_area" name="mentor_area" id="mentor_area" placeholder="나라 혹은 도시">
					</div>

					<!-- 날짜 -->
					<div class="form-group">


						<p>
							<label for="mentor_period">여행 일정 </label>
							<input type="text" id="datepicker1" name="from">
							~
							<input type="text" id="datepicker2" name="to">
						</p>
					</div>
					<!-- 여행 인원 -->
					<div class="form-group">
						<label for="mentor_area"> 여행 인원 (선택 ) </label>
						<input type="text" class="form-control enroll_input" id="" name ="numOfMem">
					</div>
					<!--여행 테마 -->
					<div class="form-group">
						<label for="mentor_area"> 여행 테마 ( 사진 + text + checkbox? ) </label>
						<input type="text" class="form-control enroll_input" id="" name="themeOfPlan">
					</div>

					<div class="form-group">
						<label for="mentor_content"> 예산 범위 </label>
						<textarea class="form-control" name = "budget"  rows="10"></textarea>
					</div>
					<div class="form-group">
						<label for="mentor_area"> 숙박 유형 (사진 + 호텔, 호스텔 , 민박, 펜션 ,기타 , 섞어서 등등 ) </label>
						<input type="text" class="form-control enroll_input" name="accomodation" placeholder="나라 혹은 도시">
					</div>
					
					<div class="form-group">
						<label for="mentor_content">멘토에게 하고 싶은 말 </label>
						<textarea class="form-control" name = "mentor_content" id="mentor_content" rows="10"></textarea>
					</div>
					
					<br>

					<button type="submit" class="btn btn-default enroll_mentoring_button ">
						견적서 제출하기 
					</button>
				</form>
			</div>
		</div>
	</div>
</section>


<script>

  function initAutocomplete() {
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 30.8688, lng: 181.2195},
      zoom: 2,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    // Create the search box and link it to the UI element.
    var input = document.getElementById('pac-input');
    var searchBox = new google.maps.places.SearchBox(input);
    map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

    // Bias the SearchBox results towards current map's viewport.
    map.addListener('bounds_changed', function() {
      searchBox.setBounds(map.getBounds());
    });

    var markers = '';
    // [START region_getplaces]
    // Listen for the event fired when the user selects a prediction and retrieve
    // more details for that place.
    searchBox.addListener('places_changed', function() {
      var places = searchBox.getPlaces();

      if (places.length == 0) {
        return;
      }

      // Clear out the old markers.
//      markers.forEach(function(marker) {
//        marker.setMap(null);
//      });
//      markers = [];

      // For each place, get the icon, name and location.
      var bounds = new google.maps.LatLngBounds();
      places.forEach(function(place) {
        var icon = {
          url: place.icon,
          size: new google.maps.Size(71, 71),
          origin: new google.maps.Point(0, 0),
          anchor: new google.maps.Point(17, 34),
          scaledSize: new google.maps.Size(35, 35)
        };

        // Create a marker for each place.
//        markers.push(new google.maps.Marker({
//          map: map,
//          icon: icon,
//          title: place.name,
//          position: place.geometry.location,
//        }));

        var marker = new google.maps.Marker({
          map: map,
          icon: icon,
          title: place.name,
          position: place.geometry.location,
        });

        if (place.geometry.viewport) {
          // Only geocodes have viewport.
          bounds.union(place.geometry.viewport);
        } else {
          bounds.extend(place.geometry.location);
        }

        marker.addListener('click',function(){
          if (markers == '') {
            markers = place.name;
          } else {
            markers = markers + ' ' + place.name;
          }
          $('.mentoring_area').val(markers);
          $('#mentoring_area_block').append("<div class='area_block'>" + place.name + "</div>")
//          $('#mentoring_area_block').append($('#mentoring_area_block').find('.area_block').get().reverse());
          map.setZoom(2);
          map.setCenter(map.center);
          $('#pac-input').val('');
        });
      });
      map.fitBounds(bounds);
    });
    // [END region_getplaces]
  }


  // datepicker
  $(function() {
    $("#datepicker1, #datepicker2").datepicker({
      dateFormat : 'yy-mm-dd'
    });
  });

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA72zF0QFMu6C2d3aim0lUlMJLsmbQEwIo&libraries=places&callback=initAutocomplete"
        async defer></script>


